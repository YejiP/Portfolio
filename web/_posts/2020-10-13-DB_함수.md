



# Oracle DB 함수

## 1)  단일행 함수

- 레코드 하나하나에 함수가 적용

### 문자 데이터를 처리하는 함수 

**LOWER, UPPER, INITCAP, LENGTH, CONCAT, RPAD,SUBSTR**

```sql
SELECT first_name, upper(first_name), lower(first_name)
FROM employees;
```

**initcap**은 첫글자는 대문자 나머지는 소문자

```sql
SELECT INITCAP('soap')
FROM dual; --가상 테이블, 테스트할 때 유용
```

**SUBSTR**로 부분 문자열 출력 가능

```sql
SELECT first_name, 
--JAVA와 다르게 인덱스는 1부터 시작하고, 세번째 ARG는 3글자를 나타낸다. 
SUBSTR(first_name,2,3) FROM employees;

```

**RPAD**

```SQL
SELECT RPAD(SUBSTR(PHONE_NUMBER,1,6),LENGTH(PHONE_NUMBER),'*') FROM EMPLOYEES;
```

**CONCAT**

```SQL
SELECT 'ICE' || ' ' || 'COFFE' FROM DUAL;
SELECT CONCAT('ICE',' COFFEE') FROM DUAL; --무조건 두개만, 세개 쓰면 오류난다.

SELECT FIRST_NAME ||' '|| LAST_NAME FROM EMPLOYEES;
```



### 숫자 데이터를 처리하는 함수

**TRUNC**

소수점 이하를 버리는 함수

```SQL
SELECT TRUNC(42.435) FROM DUAL;
```

**CEIL**

올림 함수

```SQL
SELECT CEIL(42.435) FROM DUAL;
```

**FLOOR**

버림 함수

```SQL
SELECT FLOOR(42.435) FROM DUAL;
```

**ROUND**

반올림 함수

```SQL
-- 두번째 ARG인 1, 소숫점 이하 첫번째 자리 의미
SELECT ROUND(42.435,1) FROM DUAL;
-- 결과 : 42.4 

-- 두번째 ARG인 1, 소숫점 이하 첫번째 자리 의미
SELECT ROUND(42.435,-1) FROM DUAL;
-- 결과 : 40

```



**MOD**

```sqlite
SELECT MOD(9,2) FROM DUAL;
```



### 날짜를 다루는 함수

```SQL
-- 시스템 상의 날짜를 가져온다.
SELECT SYSDATE FROM DUAL;

--30일 후 날짜
SELECT SYSDATE+30 FROM DUAL;

--근속 일수
SELECT FIRST_NAME, HIRE_DATE, TRUNC(SYSDATE-HIRE_DATE,2)
FROM EMPLOYEES;

--근속 개월수
SELECT FIRST_NAME AS "이름", HIRE_DATE AS "입사일", ROUND(MONTHS_BETWEEN(SYSDATE,HIRE_DATE)) AS "근속 개월"
FROM EMPLOYEES
ORDER BY 3;--3번째 컬럼을 기준으로 정렬해서 보여줌
```



**ADD_MONTHS**

```SQL
-- 5개월 후
SELECT ADD_MONTHS(SYSDATE,5) FROM DUAL;
```





## 2) 그룹 함수 

- 레코드를 특정 조건으로 그룹화 한 후 그룹을 기준으로 함수를 적용