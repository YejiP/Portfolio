# 게시판 만들기 - FRONTEND

```
jsp와 controller의 상호작용을 잘 보도록 한다.
```

- jsp와 controller 가 어떻게 정보를 주고 받는지 모르는 사람은 [여기](http://yejip.com/web/2020-11-16-SpringOracle3Cont/)를 먼저 보고 오세요
- index 화면 구상을 아직 하지 않아서 코드로만ㅎㅎ..
- 아래 회원가입을 누르면 join 이라는 요청이 controller로 날아가게 한다. get method로 날아간다. 

## **index.jsp**

```jsp
<li><a href = "join">회원가입</a></li>
```

## **controller - @RequestMapping("/join")**

```java
@Controller
public class MemberController {
    @RequestMapping("/join")
    public String join() {
        return "member/joinForm";
    }
```

## member/**joinForm.jsp**

<img width="501" alt="1124sp9" src="https://user-images.githubusercontent.com/37058233/100231369-4411fb00-2f6a-11eb-9a6b-2225edc549aa.PNG">

## **js 파일의 위치**

- member/joinForm.jsp의 header에는 다음과 같은 코드가 있다. 

  ```jsp
  <head>
      <script src="script/validation.js"></script>
  </head>
  ```

- 이 js파일은 엉뚱하게

  <img width="164" alt="1125sp3" src="https://user-images.githubusercontent.com/37058233/100232280-8556da80-2f6b-11eb-87f6-a65082899fa8.PNG"> src/main/webapp/resources/script 아래에 있다. 

  이 경로를 인식시켜주기 위해서 **servlet-context**에 다음과 같은 코드를 넣어준다.

  <img width="829" alt="1125sp2" src="https://user-images.githubusercontent.com/37058233/100232572-de267300-2f6b-11eb-9450-12db7d50b526.PNG">

  ```xml
  <resources mapping="/script/**" location="/resources/script/" />
  ```

## **form의 id와 action**

```jsp
<form id="form" action = "join" method ="POST">
```

**id**는 js에서 validation 을 마친 후 제출할 때 사용되어진다.

```js
var form = document.getElementById("form");
form.submit();
```

**action 과 method**는 Controller의 메쏘드와 mapping 되는 정보를 준다.

아래 함수로 mapping 된다.

```java
@RequestMapping(value = "/join", method = RequestMethod.POST)
public String join(Member member) {
    System.out.println(member);
    return "index";
}
```

##  **select와 for문**

- 페이지 위에 페이지 jstl을 이용하기 위한 페이지 지시자를 사용해야한다.

```jsp
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
```

- 아래와 같이 forEach문과 option 을 같이 사용해 쉽게 설렉트 박스를 만들 수 있다.
- begin 과 end로 시작과 끝 값을 줄 수 있다.

```jsp
<th>생년월일</th>
<td><select id ="birthyear"><!-- 1960~2000 -->
    <c:forEach var="year" begin="1960" end="2000" >
        <option>${year}</option>
    </c:forEach>
    </select>년
```

## **hidden으로 서버에 정보 넘기기**

일단 '회원가입' 버튼을 누르면 생년, 월,일의 정보의 유효성을 확인한다. 

```jsp
<input type = "hidden" id= "birth" name="birth">
```

- 만약 정보가 제대로 들어갔다면, js에서 생년월일을 하나의 string 으로 저장해 hidden tag의 value로 꽂아준다. 

```javascript
birth = birthyear.value +'-'+ birthmonth.value + "-" + birthday.value ;
document.getElementById("birth").value = birth;
//위 코드 실행 후 다음과 같이 value가 꽂힌다.
//<input type = "hidden" id= "birth" name="birth" value = 2010-03-21>
```

- 그 후 서버에 정보를 넘길 수 있게 form.submit()을 해준다.

```javascript
var form = document.getElementById("form");
form.submit();
```

