# JSTL 간단 문법

spring legacy project를 생성한 직후 해줘야할 것은 다음과 같다

```
이 포스트 정리는 11월 22일 밤 10시까지 될 예정
```

# 기본 스텝

## 1 . Project facet에서 자바 버전 수정

<img width="344" alt="1119sp2" src="https://user-images.githubusercontent.com/37058233/99896307-af41a000-2cd2-11eb-9df9-1b36089cd0fc.PNG">

## 2. pom.xml 에서 각종 라이브러리 버전 변경

**1. java, spring 버전 수정**

<img width="620" alt="1119sp1" src="https://user-images.githubusercontent.com/37058233/99896308-b10b6380-2cd2-11eb-979a-a8bc6cfe8020.PNG">

- org.springframework-versoin을 spring-context의 버전 태그 안에 써준다.

<img width="518" alt="1119sp3" src="https://user-images.githubusercontent.com/37058233/99896431-c03ee100-2cd3-11eb-9f67-b95f690044ca.PNG">

**2. servlet-api, jsp-api 버전 수정**

- mvnrepository 에서 버전 체크하고 수정해 줄 수 있다.

<img width="605" alt="1119sp4" src="https://user-images.githubusercontent.com/37058233/99896432-c1700e00-2cd3-11eb-8814-d9ac9cf2c6ff.PNG">

```xml
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>4.0.1</version>
    <scope>provided</scope>
</dependency>

<!-- https://mvnrepository.com/artifact/javax.servlet.jsp/javax.servlet.jsp-api -->
<dependency>
    <groupId>javax.servlet.jsp</groupId>
    <artifactId>javax.servlet.jsp-api</artifactId>
    <version>2.3.3</version>
    <scope>provided</scope>
</dependency>
```

- JSTL 라이브러리 버전은 최신이라 그냥 그대로 둔다.

<img width="205" alt="1119sp5" src="https://user-images.githubusercontent.com/37058233/99896430-bf0db400-2cd3-11eb-9750-ad567974157b.PNG">

# JSTL 사용하기

## **1. JSTL CORE**

- jsp 파일 머리부분에 다음과 같은 페이지 지시자를 써준다.

  <img width="339" alt="1119sp6" src="https://user-images.githubusercontent.com/37058233/99896602-693a0b80-2cd5-11eb-9c27-276020ea423f.PNG">

```jsp
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
```

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Insert title here</title>
    </head>
    <body>
        <div>
            <h1>[JSTL + EL]</h1>
            <h2>1.EL을 이용해 출력하기</h2>
            <div>
                영문자 : ${str1}<br>널 : ${str2}<br> 빈문자열 : ${str3}<br>정수
                : ${num}<br>친구 : ${friend.name}, ${friend.age}, ${friend.phone }
                <br>${tag}
                <c:forEach var="f" items="${fruit }">
                    ${f}
                </c:forEach>

                <p>친구 목록 꺼내기</p>
                <c:forEach var="fl" items="${flist }">
                    ${fl.name},${fl.age}, ${fl.phone}<br>
                </c:forEach>

                <div>
                    <h2>JSTL 변수 선언 / if 문</h2>
                    <c:set var="a" value="10" />
                    변수값 출력 : ${a}<br>
                    <!-- EL 안에 아주 간단한 연산자를 쓸 수 있다. gt lt ge le eq ne로 써도 된다. -->
                    <c:if test="${a > 10 }"></c:if>
                    <c:if test="${a gt 9 }">${a}는 9를 초과합니다.</c:if>

                    <!-- EL 연산자의 사용 -->
                    ${str2 == null }<br>
                    ${str3 == "" }<br>

                    ${empty str2 }<br>
                    ${empty str3}<br>

                    ${not empty str2 }<br>
                    ${not empty str3}<br>


                </div><br>
                <div>
                    <h2>jstl의 또 다른 for문</h2>
                    <div>
                        <c:forTokens var = "name" items="홍길동,임꺽정,손오공,사오정" delims=",">

                            ${name},${status.index },${status.count },${status.first},${status.last}<br>
                        </c:forTokens>
                    </div>
                    <h2>Map 에 들어있는 VO를 꺼내는 방법</h2>
                    <div>
                        <c:forEach var = "m" items = "${map}">
                            ${m.key} / ${m.value } / {m.value.name} / {m.value.age} / ${m.value.phone }<br>

                        </c:forEach>
                    </div>
                </div>
            </div>

        </div>
    </body>
</html>
```

## **2. JSTL FORMAT**

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Insert title here</title>
    </head>
    <body>
        <div class ="wrapper">
            <h1>[JSTL Formatting Library]</h1>
            <h2>* 날짜, 시간 출력</h2>
            <fmt:formatDate value = "${today}" type="date"/><br>
            <fmt:formatDate value = "${today}" type="time"/><br>
            <fmt:formatDate value = "${today}" type ="both"/><br>
            <fmt:formatDate value = "${today}" type ="date" pattern="yyyy년 MM월 dd일 E요일"/><br>
            <fmt:formatDate value = "${today}" type ="time" pattern ="hh시  mm분 ss초"/><br>

            <h2>* 수치 형식 데이터 출력</h2>
            <fmt:formatNumber value = "${num1}" pattern="#,###.00" /><br>
            <fmt:formatNumber value = "${num2}" pattern="#,###.00"  /><br>
            <fmt:formatNumber value = "${num2}" pattern="#,###.##"  /><br>
            <fmt:formatNumber value = "${num3}" pattern="0.0%"/><br>

        </div>
    </body>
</html>
```



## **3. JSTL FUNCTION**

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
    <%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<h1>[ JSTL - Function Library의 사용]</h1>
<h2>* 문자열 관련 함수</h2>
<p>원본 데이터 : ${str}</p>
<p>substring : ${fn:substring(str,2,5) }</p>
<p>toUpperCase : ${fn:toUpperCase(str) }</p>
<p>toLowerCase : ${fn:toLowerCase(str) }</p>
<p>length : ${fn:length(str) }</p>
<p>contains : ${fn:contains(str,'abc')}</p>
<p>
<c:set var = "ar" value="${fn:split(str,' ') }"/>
<c:forEach var = "i" items="${ar }">
${i}<br>
</c:forEach>
</p> 
<hr>
검색:
<select name ="searchItem">
<option value = "title" ${searchItem=='title' ? 'selected' : ' '} >제목</option>
<option value = "writer"  ${searchItem=='writer' ? 'selected' : ' '}>글쓴이</option>
<option value = "content"  ${searchItem=='content' ? 'selected' : ' '}>내용</option>
</select>
<br>
성별 :
<input type = "radio" name ="gender" value = "man" ${gender=='man' ? 'checked':' '}> 남성
<input type = "radio"  name ="gender" value = "woman" ${gender=="woman" ? 'checked':' ' }> 여성
<br><br>
취미 :
<input type = "checkbox" name ="hobby" value = "reading" ${ fn:contains(hobby,'reading')? 'checked':' '}>독서
<input type = "checkbox" name ="hobby" value = "fishing" ${ fn:contains(hobby,'fishing')? 'checked':' '}>낚시
<input type = "checkbox" name ="hobby" value = "hiking" ${ fn:contains(hobby,'hiking')? 'checked':' '}>등산
<input type = "checkbox" name ="hobby" value = "riding" ${ fn:contains(hobby,'riding')? 'checked':' '}>라이딩
<input type = "checkbox" name ="hobby" value = "watchingTv" ${ fn:contains(hobby,'watchingTv')? 'checked':' '}>TV 시청



</body>
</html>
```



## **Controller**

```java
package sesoc.intern.jstl;
import java.util.List;
import java.util.Map;
import java.util.Date;
import java.util.ArrayList;
import java.util.HashMap;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

import sesoc.intern.jstl.vo.Friend;
@Controller
public class JSTLController {
    @RequestMapping("/jstlcore")
    public String jstl(Model model) {
        String str1 = "Korea";
        String str2 = null;
        String str3 = "";
        int num = 12345;
        String tag = "<marquee>이것은 태그입니다.</marquee>";
        Friend friend = new Friend("삼장법사", 45,"01021553300");
        List<String> list= new ArrayList<>();
        list.add("apple");
        list.add("pear");
        List<Friend> flist= new ArrayList<>();
        flist.add(new Friend("손오공",24,"0103242"));
        flist.add(new Friend("오공손",24,"0103242"));
        //map은 interface라서 객체를 생성할 수 없다. 그래서 Hashmap으로 instance를 설정해누다.
        Map<String, Friend> map = new HashMap<String, Friend>();
        map.put("kang",new Friend("강감찬",45,"02-123-4535"));
        map.put("kim",new Friend("강동원",75,"02-123-4535"));
        map.put("Lee",new Friend("이예지",55,"02-123-4535"));

        map.put("choi",new Friend("최봉",32,"02-123-4535"));
        list.add("pear");


        //model에 데이터 담기
        model.addAttribute("str1",str1);
        model.addAttribute("str2",str2);
        model.addAttribute("str3",str3);
        model.addAttribute("num",num);
        model.addAttribute("friend",friend);
        model.addAttribute("tag",tag);
        model.addAttribute("fruit",list);
        model.addAttribute("flist",flist);
        model.addAttribute("map",map);

        return "jstlcore";
    }

    @RequestMapping("/jstlformat")
    public String jstlformat(Model model){
        double num1 = 1234.234;
        double num2 = 99.9;
        double num3 = 0.1;
        //이거 잘 안쓰고 그레고리안 캘린더 어쩌구 그거 쓴다. 이건 그냥 단순하게 테스트 하는 용이라 쓴다.
        Date today = new Date();
        model.addAttribute("today",today);
        model.addAttribute("num1",num1);
        model.addAttribute("num2",num2);
        model.addAttribute("num3",num3);
        return "jstlformat";

    }
    @RequestMapping("/jstlfunc")
    public String jstlfunc(Model model) {
        String str = "abc 가나다 ans ==ABS";
        String hobby = "reading watchingTv";
        String gender = "man";
        String searchItem ="content";

        model.addAttribute("str",str);
        model.addAttribute("hobby",hobby);
        model.addAttribute("gender",gender);
        model.addAttribute("searchItem",searchItem);
        return "jstlfunc";

    }

}
```

